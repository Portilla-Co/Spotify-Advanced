<!DOCTYPE html>

<head>
    <script>
        const endpoint = "https://gist.githubusercontent.com/flportilla/0b4acce06e2aed6ad39de765fe06ab2c/raw/c8ffc86dd67620704606770b4ec83ad6c76feab5/Adele.json"

        const discography = []

        fetch(endpoint)
            .then(blob => blob.json())
            .then(data => discography.push(...data));

    </script>
    <link rel="stylesheet" href="style.css">
</head>


<body>
    <div class="mainContainer">
        <div class="header">
            <button><svg role="img" height="24" width="24" class="Svg-sc-1bi12j5-0 jgfuCe IYDlXmBmmUKHveMzIPCF"
                    viewBox="0 0 24 24">
                    <path
                        d="M15.957 2.793a1 1 0 010 1.414L8.164 12l7.793 7.793a1 1 0 11-1.414 1.414L5.336 12l9.207-9.207a1 1 0 011.414 0z">
                    </path>
                </svg>
            </button>

            <button>
                <svg role="img" height="24" width="24" class="Svg-sc-1bi12j5-0 jgfuCe IYDlXmBmmUKHveMzIPCF"
                    viewBox="0 0 24 24">
                    <path
                        d="M8.043 2.793a1 1 0 000 1.414L15.836 12l-7.793 7.793a1 1 0 101.414 1.414L18.664 12 9.457 2.793a1 1 0 00-1.414 0z">
                    </path>
                </svg>
            </button>
        </div>
        <div class="artistName">
            <a>
                Adele
            </a>
        </div>
        <div class="discography"></div>

        <div class="fakeNav">
            <div style="height: 100%; width: 100%;">
                <img s style="height: 100%; width: 100%;" src="./images/falsenav.png">
            </div>
        </div>
    </div>
    <script>
        const albumsContainer = document.querySelector(`.discography`);
        function createAlbumNameDiv() {

            discography.reverse().map((album, index) => {

                albumsContainer.insertAdjacentHTML('afterbegin', `
                    <div class="albumsContainer">
                        <div class="albumPics">
                            <img src="./images/${album.name}.jpg">
                        </div>
                        <div class="albumInfo">
                            <div class='albumName'>
                                <span>${album.name}</span>
                            </div>
                            <div class="albumRealaseDate">
                                <span>Álbum</span>
                                <span>• ${album.year} •</span>
                                <span>${album.numberOfSongs} canciones</span>
                            </div>
                            <div class="buttons">
                                <button type="submit">
                                    <svg role="img" height="16" width="16" viewBox="0 0 16 16" class="Svg-sc-1bi12j5-0 jgfuCe">
                                        <path
                                            d="M3 1.713a.7.7 0 011.05-.607l10.89 6.288a.7.7 0 010 1.212L4.05 14.894A.7.7 0 013 14.288V1.713z">
                                        </path>
                                    </svg>
                                </button>
                                <button type="submit">
                                    <svg role="img" height="24" width="24" viewBox="0 0 24 24" class="Svg-sc-1bi12j5-0 jgfuCe">
                                        <path
                                            d="M5.21 1.57a6.757 6.757 0 016.708 1.545.124.124 0 00.165 0 6.741 6.741 0 015.715-1.78l.004.001a6.802 6.802 0 015.571 5.376v.003a6.689 6.689 0 01-1.49 5.655l-7.954 9.48a2.518 2.518 0 01-3.857 0L2.12 12.37A6.683 6.683 0 01.627 6.714 6.757 6.757 0 015.21 1.57zm3.12 1.803a4.757 4.757 0 00-5.74 3.725l-.001.002a4.684 4.684 0 001.049 3.969l.009.01 7.958 9.485a.518.518 0 00.79 0l7.968-9.495a4.688 4.688 0 001.049-3.965 4.803 4.803 0 00-3.931-3.794 4.74 4.74 0 00-4.023 1.256l-.008.008a2.123 2.123 0 01-2.9 0l-.007-.007a4.757 4.757 0 00-2.214-1.194z">
                                        </path>
                                    </svg>
                                </button>
                                <button type="submit">
                                    <svg role="img" height="24" width="24" viewBox="0 0 24 24" class="Svg-sc-1bi12j5-0 jgfuCe">
                                        <path
                                            d="M4.5 13.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm15 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm-7.5 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z">
                                        </path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        </div>
                        <div class="listHeader">
                            <span>#</span>
                            <span>TÍTULO</span>
                            <span>
                                <svg role="img" height="16" width="16" viewBox="0 0 16 16" class="Svg-sc-1bi12j5-0 jgfuCe">
                                    <path d="M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8z"></path>
                                    <path d="M8 3.25a.75.75 0 01.75.75v3.25H11a.75.75 0 010 1.5H7.25V4A.75.75 0 018 3.25z"></path>
                                </svg>
                            </span>
                        </div>
    `)
            })
        }

        function createSongsListDiv() {

            let albumList = [] //array with only the songs [[{}], [{}], [{}], [{}]]
            let listContainer = document.querySelectorAll('.listHeader') //selector from where I need to create the list of songs (below this)
            const albums = []  //elements on an array
            discography.reverse().map((album) => {
                albumList.push(album.songs)

            })
            listContainer.forEach((album, index) => {
                albums.push(album)
            })
            albumList.map((album, index) => {
                for (let i = (album.length - 1); i >= 0; i--) {

                    albums[index].insertAdjacentHTML('afterend', `
                    <div class="songsListContainer">
                        <span>${[i + 1]}</span>
                        <div class="songName">
                            <span>${albumList[index][i].name}</span>
                            <span>Adele</span>
                        </div>
                        <div class ="duration">
                            <span>${albumList[index][i].duration}</span>
                        </div>
                    </div>

                    
                    `)
                }

            })
        }
        window.addEventListener('load', () => {
            createAlbumNameDiv()
            createSongsListDiv()
            addSeparators()
        })

        function addSeparators() {
            const albumContainers = []
            const albumsInfoContainer = document.querySelectorAll('.albumsContainer')
            albumsInfoContainer.forEach((albumContainer, index) => {
                albumContainers.push(albumContainer)
            })
            console.log(albumContainers)
            for (let index = 1; index < albumContainers.length; index++) {
                albumContainers[index].insertAdjacentHTML('beforeBegin', '<div class="separator"></div>')

            }


        }

    </script>

</body>